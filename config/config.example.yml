# AI-Intercom configuration
# Copy to ~/.config/ai-intercom/config.yml and adjust values

mode: standalone  # hub, daemon, or standalone (hub+daemon)

machine:
  id: "my-machine"
  display_name: "My Machine"
  description: "Description of this machine"

# Telegram settings (hub/standalone only)
telegram:
  bot_token: ""           # Set via TELEGRAM_BOT_TOKEN env var
  supergroup_id: 0        # Set via TELEGRAM_SUPERGROUP_ID env var
  security:
    allowed_users: []     # Set via TELEGRAM_OWNER_ID env var
    restrict_to_supergroup: true
    ignore_private_messages: true

# Network settings
hub:
  url: ""                 # Daemon: URL of the hub
  listen: "0.0.0.0:7700" # Hub: listen address

# Auth
auth:
  token: ""               # Set via INTERCOM_TOKEN env var

# Project discovery
discovery:
  enabled: true
  scan_paths: []
  detect_by:
    - file: "CLAUDE.md"
    - file: ".git"
    - file: "AGENTS.md"
  exclude:
    - "node_modules"
    - ".venv"
    - "backup"
    - "__pycache__"

# Agent launcher
agent_launcher:
  default_command: "claude"
  default_args: ["-p", "--output-format", "json"]
  allowed_paths: []
  max_mission_duration: 1800

# Intelligent dispatcher (routes natural language Telegram messages via claude -p)
dispatcher:
  enabled: false
  target: "serverlab/serverlab"    # Agent that receives dispatched messages
  system_prompt: |
    Tu es le dispatcher Telegram AI-Intercom. Tu reponds de maniere concise.
    Tu as acces aux outils MCP intercom pour communiquer avec les agents.
    Utilise intercom_list_agents() pour decouvrir les agents disponibles.
    Utilise intercom_start_agent() pour lancer des taches sur d'autres machines.
    Formate tes reponses en Markdown compatible Telegram (pas de triple backtick).

# Manual project list (overrides discovery if non-empty)
projects: []
