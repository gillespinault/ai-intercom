# AI-Intercom Approval Policies
# Rules are evaluated top-to-bottom (first match wins)

defaults:
  require_approval: once

rules:
  # Human dispatch from Telegram: auto-approve
  - from: "human"
    to: "*"
    approval: never
    label: "Human dispatch - no approval needed"

  # Local same-machine communications: auto-approve
  - from: "serverlab/*"
    to: "serverlab/*"
    approval: always_allow
    label: "Local serverlab communications"

  # Read-only queries: auto-approve
  - from: "*"
    to: "*"
    type: send
    message_pattern: "status|ping|health|check|list"
    approval: never
    label: "Read-only status queries"

  # Agent launches always require approval
  - from: "*"
    to: "*"
    type: start_agent
    approval: once
    label: "Agent launches require approval"
